#include <stdio.h>
#include <stdlib.h>
#include <time.h> // Для генерації випадкових чисел

#define MAX_SIZE 100// Максимальний розмір масиву

int main() {// Головна функція програми
    int arr[MAX_SIZE];// Оголошення масиву для зберігання елементів
    int n, i, choice;// Розмір масиву, лічильник циклу, вибір користувача
    int minIndex, maxIndex;// Індекси мінімального та максимального елементів
    int sumNegative;// Змінна для суми від’ємних елементів
    long long productBetween;// Змінна для добутку елементів між мінімальним і максимальним

    while (1) {// Цикл для повторення програми
        printf("\n=== МЕНЮ ===\n");
        printf("0 - Вихід\n");
        printf("1 - Ввести масив вручну\n");
        printf("2 - Заповнити випадковими числами [-100; 100]\n");
        printf("Ваш вибір: ");
        
        if (scanf("%d", &choice) != 1) {// Перевірка на коректність вводу
            printf("❌ Некоректне введення. Завершення програми.\n");// Повідомлення про помилку
            break;// Завершення програми
        }

        if (choice == 0) {// Якщо користувач вибрав вихід
            printf("✅ Програму завершено користувачем.\n");// Повідомлення про завершення
            break;
        }

        if (choice != 1 && choice != 2) {// Якщо вибір некоректний
            printf("❗ Недопустимий вибір. Спробуйте ще раз.\n");// Повідомлення про помилку
            continue;// Продовження циклу для повторного вводу
        }

        printf("Введіть розмір масиву (1-%d): ", MAX_SIZE);
        if (scanf("%d", &n) != 1 || n <= 0 || n > MAX_SIZE) {// Перевірка на коректність розміру масиву
            printf("❌ Помилка: некоректний розмір масиву. Спробуйте ще раз.\n");// Повідомлення про помилку
            while (getchar() != '\n'); // очищення буфера
            continue;// Продовження циклу для повторного вводу
        }

        if (choice == 1) {// Якщо користувач вибрав введення масиву вручну
            printf("Введіть %d цілих чисел:\n", n);
            for (i = 0; i < n; i++) {// Цикл для вводу елементів масиву
                printf("arr[%d] = ", i);
                if (scanf("%d", &arr[i]) != 1) {// Перевірка на коректність вводу елемента
                    printf("❌ Помилка: некоректне число. Завершення.\n");// Повідомлення про помилку
                    return 1;
                }
            }
        } else if (choice == 2) {// Якщо користувач вибрав заповнення масиву випадковими числами
            srand(time(NULL));// Ініціалізація генератора випадкових чисел
            printf("Згенеровано масив:\n");// Повідомлення про генерацію масиву
            for (i = 0; i < n; i++) {// Цикл для заповнення масиву випадковими числами
                arr[i] = rand() % 201 - 100;// Генерація випадкового числа в діапазоні [-100; 100]
                printf("arr[%d] = %d\n", i, arr[i]);// Вивід згенерованого елемента
            }
        }

        // Обчислення
        sumNegative = 0;// Ініціалізація змінної для суми від’ємних елементів
        productBetween = 1;// Ініціалізація змінних для суми від’ємних елементів та добутку
        minIndex = 0;// Ініціалізація індексів мінімального та максимального елементів
        maxIndex = 0;// Ініціалізація індексів мінімального та максимального елементів

        for (i = 0; i < n; i++) {// Цикл для проходження по масиву
            if (arr[i] < 0)// Якщо елемент від’ємний
                sumNegative += arr[i];// Додавання елемента до суми від’ємних
            if (arr[i] < arr[minIndex]) minIndex = i;// Якщо елемент менший за поточний мінімум, оновлення індексу мінімального
            if (arr[i] > arr[maxIndex]) maxIndex = i;// Якщо елемент більший за поточний максимум, оновлення індексу максимального
        }

        if (minIndex > maxIndex) {// Якщо індекс мінімального більший за індекс максимального
            int temp = minIndex;// Змінна для тимчасового зберігання індексу
            minIndex = maxIndex;// Обмін індексами
            maxIndex = temp;// Обмін індексами
        }

        if (maxIndex - minIndex <= 1) {// Якщо між мінімальним і максимальним немає елементів
            printf("\n⚠️ Немає елементів між мінімальним і максимальним.\n");// Повідомлення про відсутність елементів
            productBetween = 0;// Добуток між мінімальним і максимальним елементами дорівнює 0
        } else {// Якщо між мінімальним і максимальним є елементи
            for (i = minIndex + 1; i < maxIndex; i++) {//   Цикл для обчислення добутку елементів між мінімальним і максимальним
                productBetween *= arr[i];// Множення елемента на добуток
            }
        }

        printf("\nСума від’ємних елементів: %d\n", sumNegative);// Вивід суми від’ємних елементів
        printf("Добуток елементів між min і max: %lld\n", productBetween);// Вивід добутку елементів між мінімальним і максимальним
    }

    return 0;
}
