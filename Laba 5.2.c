#include <stdio.h>
#include <stdlib.h>// –î–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª
#include <time.h>// –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª

#define MAX_SIZE 100// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –º–∞—Å–∏–≤—É

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞
void clearInputBuffer() { // –û—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥—É
    while (getchar() != '\n');// –ß–∏—Ç–∞–Ω–Ω—è —Å–∏–º–≤–æ–ª—ñ–≤ –¥–æ –∫—ñ–Ω—Ü—è —Ä—è–¥–∫–∞
}

int main() {
    int arr[MAX_SIZE];// –û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞—Å–∏–≤—É
    int n, i, choice;// –†–æ–∑–º—ñ—Ä –º–∞—Å–∏–≤—É, –ª—ñ—á–∏–ª—å–Ω–∏–∫ —Ü–∏–∫–ª—É, –≤–∏–±—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    int minIndex, maxIndex;// –Ü–Ω–¥–µ–∫—Å–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
    int sumNegative;// –°—É–º–∞ –≤—ñ–¥‚Äô—î–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
    long long productBetween;// –î–æ–±—É—Ç–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º

    while (1) {// –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–∏
        printf("\n=== –ú–ï–ù–Æ ===\n");
        printf("0 - –í–∏—Ö—ñ–¥\n");
        printf("1 - –í–≤–µ—Å—Ç–∏ –º–∞—Å–∏–≤ –≤—Ä—É—á–Ω—É\n");
        printf("2 - –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —á–∏—Å–ª–∞–º–∏ [-100; 100]\n");
        printf("–í–∞—à –≤–∏–±—ñ—Ä: ");

        if (scanf("%d", &choice) != 1) {//  –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            printf("‚ùå –í–∏ –≤–≤–µ–ª–∏ –Ω–µ —á–∏—Å–ª–æ!\nüëâ –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ —ñ –≤–≤–µ–¥—ñ—Ç—å 0, 1 –∞–±–æ 2.\n");
            clearInputBuffer();// –û—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥—É
            continue;// –ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è —Ü–∏–∫–ª—É, —è–∫—â–æ –≤–≤–µ–¥–µ–Ω–Ω—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ
        }

        if (choice == 0) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –≤–∏—Ö—ñ–¥ –∑ –ø—Ä–æ–≥—Ä–∞–º–∏
            printf("‚úÖ –ü—Ä–æ–≥—Ä–∞–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.\n");// –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏
            break;// –í–∏—Ö—ñ–¥ –∑ —Ü–∏–∫–ª—É
        }

        if (choice != 1 && choice != 2) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º–∏–π –≤–∏–±—ñ—Ä
            printf("‚ùó –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–∏–π –≤–∏–±—ñ—Ä. –í–≤–µ–¥—ñ—Ç—å 1 –∞–±–æ 2.\n");//      –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
            clearInputBuffer();// –û—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥—É
            continue;// –ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è —Ü–∏–∫–ª—É, —è–∫—â–æ –≤–∏–±—ñ—Ä –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π
        }

        printf("–í–≤–µ–¥—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –º–∞—Å–∏–≤—É (1-100): ");// –ó–∞–ø–∏—Ç —Ä–æ–∑–º—ñ—Ä—É –º–∞—Å–∏–≤—É
        if (scanf("%d", &n) != 1 || n <= 0 || n > MAX_SIZE) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å —Ä–æ–∑–º—ñ—Ä—É –º–∞—Å–∏–≤—É
            printf("‚ùå –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –º–∞—Å–∏–≤—É.\nüëâ –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.\n");
            clearInputBuffer();// –û—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥—É
            continue;// –ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è —Ü–∏–∫–ª—É, —è–∫—â–æ —Ä–æ–∑–º—ñ—Ä –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π
        }

        if (choice == 1) {// –í–≤–µ–¥–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –≤—Ä—É—á–Ω—É
            for (i = 0; i < n; i++) {// –¶–∏–∫–ª –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–∞—Å–∏–≤—É
                printf("arr[%d] = ", i);// –ó–∞–ø–∏—Ç –Ω–∞ –≤–≤–µ–¥–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å–∏–≤—É
                if (scanf("%d", &arr[i]) != 1) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—è
                    printf("‚ùå –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è!\nüëâ –°–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É –∑ –º–µ–Ω—é.\n");
                    clearInputBuffer();// –û—á–∏—â–µ–Ω–Ω—è –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥—É
                    break;// –í–∏—Ö—ñ–¥ –∑ —Ü–∏–∫–ª—É, —è–∫—â–æ –≤–≤–µ–¥–µ–Ω–Ω—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ
                }
            }
            if (i < n) continue;// –Ø–∫—â–æ –≤–≤–µ–¥–µ–Ω–Ω—è –ø–µ—Ä–µ—Ä–≤–∞–Ω–æ, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—è –¥–æ –ø–æ—á–∞—Ç–∫—É —Ü–∏–∫–ª—É
        } else {// –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —á–∏—Å–ª–∞–º–∏
            srand(time(NULL));// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª
            printf("–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –º–∞—Å–∏–≤:\n");// –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –º–∞—Å–∏–≤—É
            for (i = 0; i < n; i++) {// –¶–∏–∫–ª –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –º–∞—Å–∏–≤—É
                arr[i] = rand() % 201 - 100;// –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ —á–∏—Å–ª–∞ –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ [-100; 100]
                printf("arr[%d] = %d\n", i, arr[i]);// –í–∏–≤–µ–¥–µ–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å–∏–≤—É
            }
        }

        // –û–±—á–∏—Å–ª–µ–Ω–Ω—è
        sumNegative = 0;// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—É–º–∏ –≤—ñ–¥‚Äô—î–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        productBetween = 1;// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ–±—É—Ç–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º
        minIndex = 0;// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω–¥–µ–∫—Å—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
        maxIndex = 0;// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω–¥–µ–∫—Å—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞

        for (i = 0; i < n; i++) {// –¶–∏–∫–ª –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—É–º–∏ –≤—ñ–¥‚Äô—î–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
            if (arr[i] < 0) sumNegative += arr[i];// –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥‚Äô—î–º–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –¥–æ —Å—É–º–∏
            if (arr[i] < arr[minIndex]) minIndex = i;// –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
            if (arr[i] > arr[maxIndex]) maxIndex = i;// –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
        }

        if (minIndex > maxIndex) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—è–¥–∫—É —ñ–Ω–¥–µ–∫—Å—ñ–≤ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
            int temp = minIndex;// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ç–∏–º—á–∞—Å–æ–≤—É –∑–º—ñ–Ω–Ω—É
            minIndex = maxIndex;// –ó–∞–º—ñ–Ω–∞ —ñ–Ω–¥–µ–∫—Å—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞ —ñ–Ω–¥–µ–∫—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ
            maxIndex = temp;// –ó–∞–º—ñ–Ω–∞ —ñ–Ω–¥–µ–∫—Å—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞ —Ç–∏–º—á–∞—Å–æ–≤—É –∑–º—ñ–Ω–Ω—É
        }

        if (maxIndex - minIndex <= 1) {// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º
            printf("\n‚ö†Ô∏è –ù–µ–º–∞—î –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º.\n");// –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º
            productBetween = 0;// –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–±—É—Ç–∫—É –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤ 0
        } else {// –Ø–∫—â–æ —î –µ–ª–µ–º–µ–Ω—Ç–∏ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º
            for (i = minIndex + 1; i < maxIndex; i++) {// –¶–∏–∫–ª –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –¥–æ–±—É—Ç–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º
                productBetween *= arr[i];// –ú–Ω–æ–∂–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞ –¥–æ–±—É—Ç–æ–∫
            }
        }

        printf("\n–°—É–º–∞ –≤—ñ–¥‚Äô—î–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤: %d\n", sumNegative);// –í–∏–≤–µ–¥–µ–Ω–Ω—è —Å—É–º–∏ –≤—ñ–¥‚Äô—î–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        printf("–î–æ–±—É—Ç–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ min —ñ max: %lld\n", productBetween);// –í–∏–≤–µ–¥–µ–Ω–Ω—è –¥–æ–±—É—Ç–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º—ñ–∂ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º 
    }

    return 0;
}
